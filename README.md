# Entrainement ‚Äî Popup de notation

![Design preview](./doc/design/1.%20Desktop.png)
### **[D√©mo Live](https://rating.matthieu-munoz.fr)**

## Bienvenue ! üëã

Voici un exercice inspir√© d'un challenge [Frontend Mentor](https://www.frontendmentor.io).

**Pour r√©aliser cet exercice, vous aurez besoin de connaissances de base en HTML, CSS (SCSS) et JavaScript (React/redux).**

## "Tu me notes combien ?" :

Cet exercice pourra vous √™tre utile sur plusieurs projets !

En effet, imaginons ce petit composant d'envoi d'avis sur votre portfolio, il sera accessible sous forme de popup par l'appui sur un bouton ou un √©v√©nement d√©clencheur‚Ä¶ L'utilisateur pourra ainsi envoyer son avis sous forme de note sur cinq avec l'option d'ajouter aussi un court message.

Cet exercice est pr√©vu pour guider la r√©alisation de ce composant avec React et Sass. Libre √† vous d'en faire ce que vous voulez !

### Description du projet

|                    Vue globale                    |              Vue au survol et clic              |
| :-----------------------------------------------: | :---------------------------------------------: |
|        ![](./doc/design/1.%20Desktop.png)         | ![](./doc/design/2.%20Desktop%20-%20Active.png) |
|               Vue commentaire actif               |              Confirmation d'envoi               |
| ![](./doc/design/3.%20Desktop%20-%20Comments.png) | ![](./doc/design/4.%20Desktop%20-%20Thanks.png) |

### Objectifs :

- L'utilisateur doit pouvoir choisir une note entre 1 et 5
  - Une note doit √™tre s√©lectionn√©e pour ex√©cuter l'envoi
- √Ä l'appui sur le bouton *commentaire*, un champ pour taper du texte s'affiche
  - Si un commentaire est entr√©, alors l'envoyer en plus de la note
- Suite √† l'envoi, afficher un message de succ√®s avec la note envoy√©e.

Ici, nous g√©rons uniquement les fonctionnalit√©s directes. L'objectif final et d'afficher en console.log la note laiss√© par l'utilisateur √† l'envoi et potentiellement le commentaire.
En cas r√©el, on pourrait imaginer l'envoi d'un mail contenant la note ainsi que le commentaire, ou bien de stocker tous les avis dans une base de donn√©es (utilisation possible d'une api)

## Initialisation du projet

Cet exercice est livr√© avec un fichier package.json d√©j√† rempli, toutes les d√©pendances utilis√©es y sont d√©j√† configur√©es.

Il vous reste donc √† :

1. Cloner ce repo
2. Ouvrir un terminal dans le r√©pertoire
3. Faire un ```yarn```
4. Ouvrir dans VS Code √† partir du terminal avec un ```code . ```
5. Pour lancer le serveur de dev, faire un ```yarn start```

## Pas √† pas

### 1. Prise en main de l'exercice

On commence par parcourir l'environnement de travail, les divers dossiers/fichiers d√©j√† en place.
Les ressources √† pointer sont :

- Ce README
- Le fichier [style-guide](./style-guide.md) contenant les informations dont vous aurez besoin, telles que la palette de couleurs et les polices.
- Les images du dossier doc/design ainsi que la [D√©mo Live](https://rating.matthieu-munoz.fr) pour bien comprendre.
- Le fichier package.json pour connaitre les d√©pendances install√©es. Je vous aide avec les quelques notables :
  - classnames ‚áí Permet au besoin de conditionner une variable √† destination d'un className. Tr√®s utile pour des styles diff√©rents en fonction d'une class/d'un √©tat.
  - react-autosize-textarea ‚áí Permet l'ajout d'un composant textarea "autosizeable". Plus d'infos [ici](https://github.com/buildo/react-autosize-textarea) et [l√† pour comprendre](https://react-components.buildo.io/#textareaautosize)
  - react-icons ‚áí Donne acc√®s √† une multitude d'ic√¥nes tr√®s facilement, [√† consulter](https://react-icons.github.io/react-icons/)
  - react-tooltip ‚áí Permet d'afficher et de param√©trer des petits tooltip tr√®s facilement. [doc](https://github.com/wwayne/react-tooltip#readme) et [d√©mo](https://wwayne.github.io/react-tooltip/)
  - react, react-dom, react-redux, redux, prop-types" ‚áí Pour des raisons √©videntes
- La branche *int√©gration-HTML/SCSS* contenant une int√©gration "brut" possible dans le composant principal.
- La branche *solution-matthieu* contenant une solution compl√®te possible

### 2. "Par o√π je commence ?"

C'est LA question que l'on se pose tous au d√©marrage d'un projet‚Ä¶
Tout va d√©pendre de votre confort en HTML/JSX et CSS.
Par exemple, il est tout √† fait envisageable de commencer par travailler dans le fichier [index.js](./src/components/App/index.js) du composant principal ainsi que l'[index.scss](./src/styles/index.scss). On y r√©alise l'int√©gralit√© de l'int√©gration (sans les interactions JS) avant de venir tout d√©couper dans les bons composants.
C'est d'ailleurs la d√©marche que je vous conseille pour commencer et que j'expliquerai ensuite.
Une autre approche bien plus rapide, mais qui demande beaucoup de rigueur et une compr√©hension assez avanc√©e du chemin √† prendre‚ÄØ; c'est de directement coder dans les composants et fichier SCSS correspondant. L'id√©e l√†, c'est d'aller de l'ext√©rieur le plus global vers l'int√©rieur progressivement.

### 3. HTML/SCSS

C'est parti pour l'int√©gration !

#### 3.1 Direction les [styles "racines"](./src/styles)

La premi√®re √©tape que je conseille, c'est de consulter la charte graphique ou les docs objectifs pour vraiment prendre conscience du projet. Ici, on a en racine du repo un fichier [style-guide](./style-guide.md) contenant les styles utilis√©s pour la d√©mo. 
On va commencer par poser les diff√©rentes variables qui seront utiles et surtout utiliser pendant tout le projet. Ici, √ßa va √™tre principalement des couleurs. POur cela, on va copier le contenu du [style-guide](./style-guide.md) dans [_vars.scss](./src/styles/_vars.scss) pour le reformater en diff√©rentes variables Sass qui seront utilisables √† travers tout notre projet.

```scss
// Exemple possible avec des couleurs
$rouge-fonce: #8B0000;
$rouge-clair: #DC143C;
// ainsi que l'assignation √† d'autre variable
$accentColor: $rouge-clair;
$backgroudColor: $rouge-fonce;
// Comme √ßa, si un jour le besoin de changer la couleur de fond se pr√©sente on change tout ici et pas dans CHAQUE fichier o√π il est utilis√©.
```

Libre √† vous de jouer avec les couleurs !

<details>
  <summary>Solution possible pour le fichier _Vars.scss</summary>

  ```scss
  // colors variable
  $green: hsl(144, 29%, 43%);
  $white: hsl(0, 0%, 100%);
  $light-grey: hsl(217, 12%, 63%);
  $dark-blue: hsl(213, 19%, 18%);
  $very-dark-blue: hsl(217, 14%, 19%);
  $gradientColors: hsl(215, 20%, 17%) 0%, hsl(216, 24%, 12%) 100%;
  // Used throughout the project
  $accentColor: $green;
  $gradient: radial-gradient(ellipse at top, $gradientColor);

  // Fonts
  $font-main: 'Overpass';
  $fw-classic: 400;
  $fw-bold: 700;
  ```

</details>

On continue ensuite avec la mise en place de notre SCSS de base, celui qui englobe tout : [index.scss](./src/styles/index.scss)
Cette feuille de style fait r√©f√©rence directe au fichier [index.html](./src/assets/index.html) et sera commun sur toute l'app. C'est donc ici que l'on va √©crire les styles de fond qui s'appliqueront sur toute notre app.
Ici deux √©l√©ments √† styliser : body et #root.
On appliquera au body les propri√©t√©s de polices (sans oublier de les inclure √† l'index.html de assets) puis √† #root un arri√®re-plan, une taille correspondante √† la fen√™tre ainsi qu'un centrage de ses √©l√©ments au centre.

La page que l'on obtient est compl√®tement grise (couleur de l'arri√®re-plan) et pr√™te √† recevoir notre composant App qui se retrouvera au centre de notre page.
<details>
  <summary>Solution possible pour le fichier index.scss</summary>

  ```scss
  @use 'reset';
  @use 'vars';

  body {
    font-family: vars.$font-main, sans-serif;
    font-size: 16px;
    font-weight: vars.$fw-classic;
    line-height: 1.6em;
  }

  #root {
    display: grid;
    place-content: center;
    height: 100vh;
    width: 100%;
    background-color: vars.$very-dark-blue;
  }
  ```

</details>

#### 3.2 On ajoute de la forme

Nous allons pour le moment travailler dans le composant App. Libre √† vous de le renommer √† souhait.
On veut construire toute la structure HTML de notre "popup" dans [son √©tat au chargement](./doc/design/1.%20Desktop.png).

Un peu de pr√©paration, prenez l'image fournie et poser dans votre t√™te ou sur papier la structure globale qu'aura votre HTML (√©l√©ments parents/enfants, etc).
Pour cela ou peut faire une sch√©matisation par boite, chaque boite repr√©sente un √©l√©ment qui peuvent eux-m√™mes en contenir d'autre qui repr√©sente leurs enfants.

<details>
  <summary>Sch√©ma propos√©</summary>

  ![](./doc/structure_schema/HTML.png)

  Avec un sch√©ma comme celui-ci on devine tr√®s facilement √† quoi ressemblera notre HTML. On voit m√™me d√©j√† apparaitre certaines propri√©t√©s CSS !
  Par exemple, l'√©l√©ment global aura surement un `display: flex;` en colonne, de m√™me celui des boutons de note un `display: flex;` et une r√©partition sur la longueur.
  
</details>

Une fois cette pr√©paration effectu√©e, on se lance.
On cr√©ait chaque √©l√©ment HTML au bon endroit et on leur attribue une class. Le mieux c'est d'utiliser la convention BEM pour le nommage des class. Cela nous facilitera grandement la vie pour la mise en style Sass.

Cette convention peut faire peur, voici un petit r√©cap de comment l'utiliser :

- Chaque class prend la class de son parent et ajout un mot cl√© s√©par√© d'un '__'
- Si une class est r√©p√©t√© pour une modification, on met un '--' entre

exemple :

```JSX
  <div className="app">
    <header className="app__header">
      <h1 className="app__header__title app__header__title--dark"> Super titre</h1>
    </header>
  </div>
```

Cette notation est assez lourde, on le voit bien l√† dans l'exemple avec le mot 'app' est r√©p√©t√© quatre fois !
Vous pouvez prendre des libert√©s et tordre un peu la r√®gle √† votre avantage.
L'int√©gration suivante est disponible sur la branche 'int√©gration'

<details>
  <summary>Une structuration possible pour notre app</summary>

  ```JSX
    <div className="app">
      <div className="review">
        <header className="review__header">
          <div className="review__header__icon" />
        </header>
        <div className="review__content">
          <h2 className="review__content__title">Qu'en avez-vous pens√© ?</h2>
          <p className="review__content__text">Vous pouvez donner votre avis sur ce que vous venez de voir. Tous
            les commentaires comptent pour m'aider √† m'am√©liorer !
          </p>
        </div>
        <div className="review__ratings">
          <button type="button" className="review__ratings__btn">1</button>
          <button type="button" className="review__ratings__btn">2</button>
          <button type="button" className="review__ratings__btn review__ratings__btn--selected">3</button>
          <button type="button" className="review__ratings__btn">4</button>
          <button type="button" className="review__ratings__btn">5</button>
          <button type="button" className="review__ratings__btn review__ratings__btn--comment">C</button>
        </div>

        <button className="review__submit" type="button">Envoyer</button>
      </div>
    </div>
  ```

</details>

Ici on pose la forme, le contenu ne s'av√®re pas encore si important. Je vous conseille de quand m√™me de garder des textes de proportion similaire voir directement les bons pour que la stylisation soit correcte.

#### Petit apart√© ~ Ic√¥ne

Sur notre application on voit deux icons, une √©toile et une bulle de commentaire. Sur le web, il existe mille et une versions d'utiliser des icons, ici je vous propose d'en utiliser une tr√®s puissante disponible gr√¢ce √† react-icons.

<details>
  <summary>Avec le style correspondant</summary>

  ```SCSS
    @use 'src/styles/_vars.scss';

    .app {
      max-width: 412px;
      min-height: 416px;
      background: vars.$gradient;
      display: flex;
      justify-content: space-between;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
      border-radius: 2rem;

      .review {
        display: flex;
        justify-content: space-between;
        flex-direction: column;
        align-items: center;
        height: 100%;
        position: relative;


        &__header {
          align-self: start;

          &__icon {
            background-color: vars.$dark-blue;
            color: vars.$accentColor;
            width: 48px;
            height: 48px;
            border-radius: 2em;
            padding: 0.9em;
          }
        }

        &__content {
          margin: auto;

          &__title {
            color: vars.$white;
            font-weight: vars.$fw-bold;
            font-size: 1.5em;
            line-height: 2em;
          }

          &__text {
            color: vars.$light-grey;
          }
        }

        &__submit {
          width: 95%;
          height: 3rem;
          background-color: vars.$accentColor;
          color: vars.$white;
          border: none;
          border-radius: 2em;
          font-weight: vars.$fw-bold;
          letter-spacing: 0.15em;
          font-size: 1.1em;
          transition: all 0.2s ease-in-out;

          &:hover {
            background-color: vars.$white;
            color: vars.$accentColor;
            transition: all 0.2s ease-in-out;
          }
        }


        &__ratings {
          width: 95%;
          display: flex;
          justify-content: space-between;
          margin-top: auto;
          margin-bottom: 1rem;

          &__btn {
            height: 3rem;
            width: 3rem;
            display: grid;
            place-content: center;
            font-weight: vars.$fw-bold;
            border: none;
            border-radius: 1.5rem;
            background-color: vars.$dark-blue;
            color: vars.$light-grey;
            transition: all 0.2s ease-in-out;

            &:hover {
              background-color: vars.$light-grey;
              color: vars.$white;
              transform: scale(1.05);
              transition: all 0.2s ease-in-out;

            }

            &--selected {
              background-color: vars.$green;
              color: vars.$white;
            }

            &--comment {
              font-size: 1.5em;
            }
          }
        }
      }
    }

  ```
  
</details>

### 4. D√©limitation des composants et structuration de /src

Nous allons r√©aliser ce projet en utilisant le couple React-Redux. De ce fait une architecture de dossier s'impose.
Commen√ßons par lister les composants globaux de notre exercice. Pour cela, comprenons qu'est-ce qui n√©cessite la cr√©ation d'un composant ou non.
Une approche possible est de diviser l'app en composant par zone "graphique"/s√©mantique. On peut aussi d√©couper en composant par √©l√©ments r√©p√©t√©s ou avec un contenu dynamique. Par exemple, un bouton que l'on retrouve √† plusieurs endroits dans notre int√©gration pourrait √™tre un composant, une zone qui utilise des donn√©es du State pourrait aussi √™tre un composant.
En bref, on serait capable de faire un composant pour un peu tout et n'importe quoi, c'est donc √† vous de trouver votre d√©coupage, celui qui vous convient.

*De plus, la premi√®re d√©coupe n'est qu'indicatif et peut tout √† fait √©voluer au fur est √† mesure que le projet avance.*

<details>
  <summary>Possibilit√© de d√©coupage des composants</summary>

J'ai choisi d√©couper cette app en 4 composants :
  
- Un composant principal - *App* - qui se charge d'afficher, soit l'interface de notation, soit le message de succ√®s
- Le composant - *Review* - qui g√®re l'interface de notation
- Le sous-composant - *Ratings* - qui s'occupe des boutons de note ainsi que celui de commentaire
- Un composant - *Comment* - permettant l'affichage d'un textarea pour laisser un commentaire en plus d'une note
- Et enfin le composant - *Succes* - qui affiche le message de succ√®s.
  
 ![Sch√©ma React](./doc/structure_schema/React.png)

  ```bash
    ‚îú‚îÄ‚îÄ components
    ‚îÇ   ‚îú‚îÄ‚îÄ Comment
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.scss
    ‚îÇ   ‚îú‚îÄ‚îÄ Ratings
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.scss
    ‚îÇ   ‚îú‚îÄ‚îÄ App
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.scss
    ‚îÇ   ‚îú‚îÄ‚îÄ Review
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.scss
    ‚îÇ   ‚îî‚îÄ‚îÄ Succes
    ‚îÇ       ‚îú‚îÄ‚îÄ index.js
    ‚îÇ       ‚îî‚îÄ‚îÄ styles.scss
  ```

</details>

Une fois les composants pos√©s, on peut commencer la structure de notre projet React-Redux.
Nous aurons besoin d'un dossier store, reducers, actions et un dernier dossier middlewares.

<details>
  <summary>Architecture de src compl√®te</summary>
  
  ```bash
    src
    ‚îú‚îÄ‚îÄ actions
    ‚îÇ   ‚îî‚îÄ‚îÄ index.js
    ‚îú‚îÄ‚îÄ assets
    ‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico
    ‚îÇ   ‚îú‚îÄ‚îÄ fonts
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Roboto-Regular.ttf
    ‚îÇ   ‚îú‚îÄ‚îÄ images
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ done-sent.svg
    ‚îÇ   ‚îî‚îÄ‚îÄ index.html
    ‚îú‚îÄ‚îÄ components
    ‚îÇ   ‚îú‚îÄ‚îÄ Comment
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.scss
    ‚îÇ   ‚îú‚îÄ‚îÄ Ratings
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.scss
    ‚îÇ   ‚îú‚îÄ‚îÄ App
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.scss
    ‚îÇ   ‚îú‚îÄ‚îÄ Review
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.scss
    ‚îÇ   ‚îî‚îÄ‚îÄ Succes
    ‚îÇ       ‚îú‚îÄ‚îÄ index.js
    ‚îÇ       ‚îî‚îÄ‚îÄ styles.scss
    ‚îú‚îÄ‚îÄ middlewares
    ‚îÇ   ‚îú‚îÄ‚îÄ debug.js
    ‚îÇ   ‚îî‚îÄ‚îÄ submitReview.js
    ‚îú‚îÄ‚îÄ reducers
    ‚îÇ   ‚îî‚îÄ‚îÄ index.js
    ‚îú‚îÄ‚îÄ store
    ‚îÇ   ‚îî‚îÄ‚îÄ index.js
    ‚îú‚îÄ‚îÄ styles
    ‚îÇ    ‚îú‚îÄ‚îÄ index.scss
    ‚îÇ    ‚îú‚îÄ‚îÄ _reset.css
    ‚îÇ    ‚îî‚îÄ‚îÄ _vars.scss
    ‚îú‚îÄ‚îÄ index.js
  ```

</details>

### Bonus

Plusieurs petites fonctionnalit√©s bonus sont envisageables :

- Un compteur de caract√®re dans la zone de commentaire
- Des toolkit affichant une petite bulle indicative sur certains boutons expliquant l'utilit√© de ceux-ci
- Une notification en cas d'essai d'envoi sans avoir mis de note
- Affichage du popup √† partir d'un petit bouton fixe dans un coin de l'√©cran
- Passer √† une notation par √©toile, avec remplissage des √©toiles pr√©c√©dentes comme indication
- ... Libre √† vous d'en ajouter beaucoup d'autre !!

## **Team Apollo** üöÄ
